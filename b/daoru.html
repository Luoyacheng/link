<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <title>é˜…è¯»å¯¼å…¥</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="æ´›å¨…æ©™ï¼Œé˜…è¯»ï¼Œä¹¦æºã€è®¢é˜…æºã€å­—å…¸ã€å‡€åŒ–ç­‰jsonæ–‡ä»¶å¯¼å…¥ï¼Œä¹¦ç±åœ°å€å¯¼å…¥ï¼Œé“¾æŽ¥å‡€åŒ–ã€‚">
    <style>
        .hidden {
            display: none;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 80vh;
        }

        textarea {
            font-size: 12px;
            width: 96%;
            margin: 16px 2%;
            padding: 8px;
            background-color: rgba(80, 155, 84, 0.1);
            border-radius: 10px;
            border: 2px solid rgba(76, 175, 80, 0.3);
        }

        textarea:focus {
            border-color: rgb(76, 175, 80);
            outline: none;
            box-shadow: 0 0 8px rgba(255, 107, 107, 0.3);
        }

        button {
            user-select: none;
            color: white;
            border: none;
            border-radius: 4px;
            height: 40px;
            width: 80px;
            overflow: hidden;
            transition: 0.3s;
            font-size: 16px;
        }

        .an-s {
            transform: scale(0.8);
        }

        #btn1 {
            background-color: rgba(76, 175, 80, 0.9);
        }

        #btn2 {
            background-color: rgba(175, 76, 80, 0.9);
        }

        #btn3 {
            background-color: rgba(76, 80, 175, 0.9);
        }
    </style>
</head>

<body>
    <h1 class="hidden">åœ¨çº¿å¯¼å…¥-æ´›å¨…æ©™</h1>
    <textarea id="copyt" rows="9" placeholder="åœ¨è¿™é‡Œå¡«å†™é“¾æŽ¥
æ”¯æŒä¹¦æºã€è®¢é˜…æºã€å‡€åŒ–ã€å­—å…¸ç­‰jsonæˆ–txtæ–‡ä»¶
æ”¯æŒä¹¦ç±ç½‘å€ï¼ˆéœ€è¦æœ‰å¯¹åº”çš„ä¹¦æºï¼‰
æ”¯æŒdataæˆ–base64åŠ å¯†é“¾æŽ¥"></textarea>
    <br>
    <button id="btn1" onclick="copy(1)">å¯¼å…¥</button>
    <br>
    <button id="btn2" onclick="cleart()">æ¸…ç©º</button>
    <br>
    <button id="btn3" onclick="copy(3)">å‡€åŒ–</button>
    <script>
        function copy(x) {
            const btn = document.getElementById('btn' + x);
            btn.classList.add('an-s');
            const cpt = document.getElementById("copyt");
            let url = cpt.value;
            if (/[åˆ é™¤åŽ»æ¶ˆ].*(?:[åˆ é™¤åŽ»æŽ‰].*[ä¸­æ±‰æˆ‘]|æ±‰.*å­—|ä¸­.*æ–‡|æ–‡.*å­—)/.test(url)) url = url.replace(/[abphm]ç«™|[ä¸€-ê€€]/g, '');
            url = url.replace(/\n[ä¸€-ê€€ï¼Œã€‚ï¼Ÿï¼ï¼›â€¦â€œâ€˜ã€â€™â€]*$/, '').replace(/\s+|ðŸ˜‚|ðŸŒš|ðŸŒ|ðŸ™„|ðŸ˜³|ðŸ™ƒ|ðŸ˜Š|ðŸ˜|ðŸ˜˜|ðŸ˜|ðŸ˜±|ðŸ˜­|ðŸ˜’|ðŸ¤”|ðŸ˜›|ðŸ˜…|ðŸ™ˆ|ðŸ™Š|ðŸ™‰|ðŸŒ¸|ðŸ€|ðŸŒ¹|ðŸŒ·|ðŸ’Ž|ðŸ’„|ðŸ’‹|ðŸ‰‘|ãŠ—ï¸|ðŸ’°|ðŸŒˆ|ðŸ¦„|ðŸ¥š|ðŸ¥Ÿ|ðŸŒ¶ï¸|ðŸ”|ðŸº|ðŸ®|ðŸ»|ðŸ¶|ðŸ¼|ðŸ–|ðŸ´|ðŸˆ|ðŸ•|ðŸ§¸|ðŸ¦Œ|ðŸŸ|ðŸ‡|ðŸ•Šï¸|ðŸ¦ž|ðŸ–¤|â¤ï¸|ðŸ’š|ðŸ’™|ðŸ’•|â˜Žï¸|ðŸŽ|ðŸ§§|ðŸŽ‰|ðŸŽŠ|ðŸ™‹|ðŸ™†|ðŸ‘°|ðŸ‡¨ðŸ‡³|ðŸŒ|ðŸ”¥|ðŸ¥±|ðŸ˜·|ðŸ˜´|ðŸ˜¡|ðŸ˜Œ|ðŸ˜‰|ðŸ˜Ž|ðŸ¤“|ðŸ¥³|ðŸ¥º|ðŸ¥°|ðŸ¤’|ðŸ¤|ðŸ¤­|ðŸ‘¿|ðŸ‘»|ðŸ’©|ðŸ’Š|ðŸ‰|ðŸ”|ðŸ‹|ðŸ¥­|ðŸ“|ðŸ¥’|ðŸ¥ |ðŸ‡|âš½|ðŸ€|ðŸ“|ðŸ›€|ðŸƒ|ðŸŽ²|ðŸ€„|ðŸŽ¹|ðŸŽ§|ðŸ“¢|ðŸš—|ðŸš¢|ðŸš†|âœˆï¸|ðŸš€|ðŸˆ¶|ðŸˆš|ãŠ™ï¸|ðŸˆ²|â™ ï¸|â™¥ï¸|â™£ï¸|â™¦ï¸|âž•|âž–|âœ–ï¸|âž—|âœ”ï¸|ðŸ˜®â€ðŸ’¨|ðŸ˜µâ€ðŸ’«|ðŸ¥¸|ðŸ”ž|ðŸ¤š|ðŸ«±|ðŸ«²|ðŸ«³|ðŸ«´|ðŸ‘Œ|ðŸ‘|ðŸ¤Œ|ðŸ«°|ðŸ«µ|ðŸ«¶|âœŒï¸|ðŸ¤Ÿ|ðŸ’ª|ðŸ‘|ðŸ¤™|ðŸ™|ðŸ™‡â€â™‚ï¸|ðŸ¤·â€â™‚ï¸|ðŸ¤¦â€â™‚ï¸|ðŸŒº|\[(?:é…·å¸|å—è™æ»‘ç¨½|å¾®ç¬‘|å“ˆå“ˆå“ˆ|å‘µå‘µ|å‘²ç‰™|å¯çˆ±|å¯æ€œ|çš±çœ‰|æƒŠè®¶|å¾®ç¬‘|åç¬‘|æµæ³ª|æŠ±æ‹³|è‰²|å¼º|dogeç¬‘å“­|dogeåŽŸè°…ta|æ—ºè´¢|OK)\]/giu, '').replace(/(\/.+\.(?:json|txt))(?:[^\/\?\-\_\.][\S\s]*)$/, '$1').replace(/^[\S\s]+?(?=https?:)/i, '').replace(/\u0026/g, '%26');
            if (url.startsWith('data:')) url = atob(url.match(/^[^,]+,([^\s,]+)/)[1]);
            if (/^[\da-z\+\/]{2,}=*$/i.test(url)) url = atob(url);
            setTimeout(() => {
                btn.classList.remove('an-s');
            }, 500);
            if (url == '') { alert('è¯·è¾“å…¥å†…å®¹'); return }
            if (/^https?\:/i.test(url) && x == 1) {
                if (/\/.+\.(?:json|txt)/i.test(url)) {
                    window.location.href = 'legado://import/Source?src=' + url;
                }
                else {
                    window.location.href = 'legado://import/addToBookshelf?src=' + url;
                }
            }
            else if (x == 3) { cpt.value = url; }
            else alert('é“¾æŽ¥æ ¼å¼é”™è¯¯');
        }
        function cleart() {
            const btn = document.getElementById('btn2');
            btn.classList.add('an-s');
            const cpt = document.getElementById("copyt");
            setTimeout(() => {
                btn.classList.remove('an-s');
            }, 300);
            cpt.value = '';
        }
    </script>
</body>

</html>