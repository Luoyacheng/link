<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <title>洛娅橙-阅读-封面规则</title>
    <meta name="author" content="洛娅橙">
    <meta name="description" content="洛娅橙，开源阅读，发布，规则教程，封面规则导入，网络小说，luoyacheng">
    <meta name="keywords" content="洛娅橙,阅读,书源,luoyacheng,封面规则">
    <meta name="Robots" content="All">
    <meta name="referrer" content="no-referrer">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://gitee.com/lyc486/yuedu/raw/master/favicon.svg">
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
    <h1 class="hidden">欢迎🎉，封面规则介绍正在加载中。</h1>
    <div class="toutu">
        <img src="https://cdn.cdnjson.com/pic.html?url=https://gd-hbimg.huaban.com/d2e4dd6928850ce74c0a0318692a4fc238c7dfbf34025-1Z8m0l_fw1200webp"
            alt="图片加载失败，不重要啦">
        <button class="open-btn" onclick="toggleSidebar()">☰</button>
    </div>

    <div class="sidebar" id="mySidebar"></div>
    <div class="sidebar-overlay" onclick="closeSidebar(event)"></div>
    <div class="lyctxt t1">
        ##2 @封面规则：
        tab 之前优书网还在，导入本地小说后，阅读软件会自动为小说匹配封面图片。现在优书网已停，原来的功能就失效了，这里分享一个默认封面匹配规则，让阅读软件的这个功能重启。
        tab 首先按照下图所示来打开界面。
        ![图片未加载](https://channel.qpic.cn/psc?/channel/NaDwC23LjvXqrn3RH.9z8fH83fEqg.WnFV6*ATvNy38K3L7qh0Dn0AEESaEpgSZe*N*SSWcwYRnDvTZx84GF3C4K7WlWb9mmN96GdtXtz3g!/b=&bo=YAlABqgMcAgRH9s!&ek=1&t=8&tl=1
        "打开界面" 90%)
        tab 然后按照下图所示来填写内容。
        ![图片未加载](https://channel.qpic.cn/psc?/channel/NaDwC23LjvXqrn3RH.9z8bEUPNmo1*rfpavPn7k*zJvXnl66z8jtraGL13v75US1fzPpeXxmW9MeB0YMBfDT9g4lgf0aC.BYxcshhAzhp6A!/c=&bo=OARgCTgEYAkRHyg!&ek=1&t=8&tl=1
        "填写内容" 90%)
        tab 下面代码进行过优化，和图片显示的内容有少许差别，请以代码为准。
        tab 1、第一个横线填写
```data:;base64,{{java.base64Encode(key)}},{"type":"lyc"}```
        tab 2、第二个横线填写
```@js:
var key = java.hexDecodeToString(result);
var url1 = `https://pre-api.tuishujun.com/api/searchBook?search_value=${key}&page=1&pageSize=20`;
var url2 = `http://m.ypshuo.com/api/novel/search?keyword=${key}&searchType=1&page=1`;
var [rr1, rr2] = java.ajaxAll([url1, url2]).map(r => r.body());
function jjson(str, rule) {
    try {
        return com.jayway.jsonpath.JsonPath.read(str, rule);
    } catch (e) {
        return [];
    }
}
rr1 = jjson(rr1, '$.data.data[*]');
rr2 = jjson(rr2, '$.data.data[*]');
var na = String(book.name),
    au = String(book.author);
function search() {
    for (let char of rr1) {
        //本地书名包含搜索结果书名
        if (na.includes(char.title + '')) {
            let au2 = char.author_nickname + '';
            //作者匹配
            if (au.includes(au2) || au2.includes(au)) {
                return char.cover;
            }
        }
    }
    for (let char of rr2) {
        if (na.includes(char.novel_name + '')) {
            let au2 = char.author_name + '';
            if (au.includes(au2) || au2.includes(au)) {
                return char.novel_img;
            }
        }
    }
    return '';
}
search()```
        tab 3、勾选启用。再点击确认即可。
        tab 本地小说的书名和作者正常，并且查询的数据库含有这本书才会成功匹配封面。
        ，。
        tabd <b style="float: right;margin-right: 5ex;">编辑于2025年9月25日·洛娅橙</b>
        ，。，。
    </div>

    </div>
    <script src="/js/main.js"></script>
</body>

</html>